  
reason towns hosting and bandwidth is sponsored by tally mechanics.com delinear course based approach to learning web Technologies thank you to Tyler McGinnis. Com Hello everybody welcome to another episode of Reason Town we're finally back after a long Hiatus it's been busy a little more regularly now and I think most of the episodes we've been talking about I think most of them is going to be Jared you and I talking together so we'll talk and I want to listen in and we'll get interviews in here sometimes you have some interviews recorded right yeah when when will be released before this goes out and then another one after 8 so let's get started first thing I wanted to do was talk about reason, cuz I didn't get to go even though I really wanted to go but reason, Indiana just happened recently you went you presented you let her workshop and you did like you represented reason town till in really short number minutes how was it

  
it was fantastic it was really well put on especially for people that had never done a Converse before right and so that the first day was all workshops and

  
 there were there were two parts to the morning was just kind of getting everybody set up making sure everybody was familiar with the reason syntax and all that and then the afternoon was different Advanced workshops one on reprocessing where I let that one and participants built a game. A simple pong game and reason and then there was a session on graphql and reason reacts and making a graph to a client and then another one on making a network multiplayer game oh that's way cool with a reason the server and no Jazz and that's where all interactive seen those recorded they can't be or not to be released right recording equipment for it okay to talk to my baby the talks were all recorded and the first couple of already been released so look for that in

  
 the reason, Twitter account they printed that out and we can put links to him in the show notes on YouTube and YouTube their host on YouTube the selection of talks with Incredible lots of really interesting things about things people are doing reason things that they want to do with reason there was a really good talk about ways that that reason thought I would let you down the little paper cuts that you come across well using reason but really good motivation for for Chang in the team to take links and a fascinating talk by Cristiano who's at Facebook on the reason team about reason animation just a ton of fun things

  
 that's great I can't wait to watch those and I think that's actually really interesting to do with throwing to talk about the hairy Parts the hard part's that's cool as a lot of confidence in wanting to make it a cool tool and not just getting high you know around that sweet I also loved the conference was about a hundred and fifty attendees it was nice and small and you could buy the end of the three days I pretty much could recognize everybody now that's an answer there was a lot of talking to each other and I don't really close feel my friend the photos of venue looked beautiful and comfortable was that the case too can't wait for next year and and there's some Rumblings about a reason Compu us so we know from him or is that still quiet there a couple different options I am helping to organize a conference called framework Summit this fall

  
 in Park City Utah and reason will be represented there as well in the idea for that conference is that multiple framework vendors are going to come together to not to like have a throw down but to have a constructive place where someone can come to learn about the different options and pick what's right for their project for the whole purpose of it is not to be kind of like a o o come see the shootout and have all this debate like the point is to come kind of hear the different options and see what's going to work out best for you tell cool I'll put a link to that in the show notes to but if you want to learn more about reason and you don't know then that might be good place cuz I talked to talk so we targeted toward teaching people who don't know whole lot about it why they would want to use it I think she isn't open yet I don't think okay so any reason audience members that want to represent read them yes please submit at submit attack this is the first year so we're running we're running lean

  
 if you're not going to like you probably won't get gold plated teeth or anything as at speaker gift if you get picked but it will be an enjoyable as smaller conference hopefully hopefully a similar kind of compact and enlightening experience the one you just had recent Top Gear Up so cool this this year that's my boy for me some reason talk to recent calls before we hit the next thing

  
 I don't think so there was a

  
 the third day was a hackathon the whole day where people took the the knowledge and ideas that they had it from talks and from the workshops and put them in practice there were some really cool project we came out of that will talk about one of those in our Park section of the end super cool that we're going to have a recording soon to with the organizers of the conference and so it stay tuned for that one cuz I'm interested to talk about like what went well in the conference and maybe ideas for those who are trying to do their own cocktails and stuff but without further Ado let's talk really quickly about the new bucklescript stuff because there have been a few new releases recently specifically but the script 3.0 and 3.1 answer phone for so fix up I noticed in 3.0 at the main thing is they removed Jas. Billion so now the reason billion miles to the JavaScript Boolean there wasn't one in the same so you might see that if you're upgrading the most libraries have already taken care of that I just had Library like Toy Story

  
 like most libraries have already taken care of that in their code and it was a really nice nice thing for debugging in for winter up it's no longer one and zero like what is this weird number doing in my code definitely big Improvement there I think for just programmability I keep saying usability but it's like for the programmer along those lines are printing records in the new boxcryptor front one right now if you log out a record before what you said I was an array of values cuz that's what they would compile to under the hood but it looks like for debugging purposes now you get back out an actual record of the debugger flag you can enable custom printers in the in the Chrome debugger and so records and variance and lists all the stuff is is now

  
 annotated behind-the-scenes such that it can display the original record Property names it's so much nicer huge black okay good to know fast piping will talk about that for a second cuz I don't know that that's super documented but you got like your normal pipe is the bar at the right arrow with a greater than sand that looks that looks like a pizza kind of Suffolk right pizza is what the hell people call it Ballin reason right but you do now you have the right pizza and then you also have the bar. That's fastpipe the golf club movie that looks like a right time and so what that. The difference is that the the fast the pizza right takes whatever argument is coming in on the left side of the operator and it sticks it as the last parameter to what

  
 function you are placing on the right side of the pizza right is that make sense if you have a person Pizza add name then the the function on on the right of the pizza gets the person that's the last argument fastpipe with the pipe. It's a little different because it takes the argument on the left and it sticks it has the first parameter to the function so that it's a slight difference but it makes it so significant usability change school we have both of them and most of the functional world that I've been aware of up to this point from Haskell and Elm etcetera follow the convention of the piping where the argument goes at the end but it looks her which is also used does it at the beginning I talk to Chang on Discord about it and he had a few reasons why putting out the beginning actually makes can make a bit more

  
 Denton and complicate things quite a bit less than that I've used both ways and Ice I really feel like it's fine I'm glad we have both operators so the fruits of the fastpipe won't really come to Bear until we have ID support for coming up with functions that can operate on the table to the left of it we're with with the normal type operator you can't really know what function to suggest because it's like anything that has this object as the last argument or the ends argument app with useful argument to use functions to use for this object but with the fastpipe you can almost get like an object-oriented feel where it's like

  
 you know I'm I'm using this object that's from this module and this much will also exports a dozen functions that take that record type as the first argument so I can just you know I can autocomplete those and it's a much smoother experience has thing like you have a module person in a person. T type which is a record and you have a function called name but get name that takes the person T-Type as its first argument and then return the string and that case that the ID could say if you have a person variable that's of type T DVD Fast Five and then I can stay out here all the things you can pass by Van Andel that's super cool I hadn't even thought about that that's great that's the major when we don't have that yet in our IDs but hopefully that'll be coming

  
 so we can do about the stuff you been working on if you had secret we can talk about I've been loud about it on this card again I have the crazy idea coming back from reason, like what if I built a new language server for reason cuz the current one uses Merlin which has been around for a long time and then use for a camel to give you idea you like creatures but Merlin has not a very good history of Windows support and it can it's fairly large lots of dependencies can be hard to set up if you want to hack on it yourself and so I just thought what how far can I get with just the back of compiler and the artifacts that generates and building up your reason language sir and I got really far I'm open to

  
 release of a doubt it soon for people to try out and donate it or anyting right no Noah PSP native necessary or is that required so it is is compiled with PSP native okay but it interacts with the bar with in Roblox group Okay cool so

  
 that means that it's fast you know yet compiled on Juanita byner E4 for your macro Linux or Windows and but yeah it works on normal back to this isn't like it compiled JavaScript for your getting the cost of evaluating JavaScript the runtime I'm putting on V8 like you you can file to a binary. That's pretty sweet and that really quickly I'd like to know how do you handle multiple platform compilation and distribution I didn't p.m. cuz I always seems like a nightmare right and there are there a couple of different ways that people do it

  
 what I'm hoping to do if this all works out and if I have a really solid product is to ship it with buckles group okay so when you install the S platform it also has the ID support binary in there that knows oh just it's in node modules along with PSP that's language server to talk to you anyway cool awesome and it also gets around the problem of oh what if what if your language server version is different from Ocala version are you using or like the bunch of weird I just need some problems are solved if you just ship it with the compiler something there too which is amazing that is awesome fastpipe makes a lot of sense and okay I want to talk really quickly about driving abstract

  
 do a whole episode on this probably at some point but they're coming to my immediately three ways to represent javascript-objects know there are many more than that but at least three obvious ways to represent javascript-objects andreason r j s. S. Object or another of gsit right jsit actual Jason Jason Jason Jason and there's actually Jas. Dick as well so this is going to be more than three and there is the Reason Record that uses driving abstract so we won't go over all those right now but I'm going to compare gsit to driving abstract and why you would maybe want to use one of the other cuz I've used both a lot recently and just in the last week or two and found pain and pleasure with both but the the jsit basically the interesting thing about this and now I don't know about this anywhere else in language should I be really curious to know but essentially

  
 when you start to use a JS object is that the object you're opting into two structural typing instead of nominal typing you end up meaning that no longer you saying like oh well I have a person type here in this function takes a person type all of a sudden you're saying I have an object of this shape so the type system actually understands you saying I have a special record with these fields on it and and so it starts understand you can do some pretty awesome things cuz what you can say actually is you can say like this function instead of expecting a person expects and like an object with a record with at least these fields jobs record with the delete these field and no more or does feels only so it turns it into you working with types based on the structure that they have and as you transform their structure like you could get in an object the three fields and then augmented

  
 add three more field and return it in now year year type is changed on the way out so I don't know if I explain that right well this is how all of flow works if you use for typing JavaScript all other definitions are based on the shape so if you have to type decorations that are the same shape but have different names flow treats them as exactly the same type where as in reason if you have to record decorations and they have different names or even if I have the same name take some out and they can't be interchanged but I do want to know more about that because I started to dig into this and realize that like the the reason syntax of wrapping quotes around the keys that Sugar syntax is actually just a way of saying like it's a JavaScript object that raps A Reason Record in the type space so you say like a thottie of record with a. That's a buckle strap thing right

  
 it is it is not a record it's an object where where oh camel stands for objective camel wear it so it it has an object oriented system in it that has this what it's called row polymorphism that's what we were describing the structural typing and so there's that there's a way to make objects that aren't JavaScript related it's more cumbersome the syntax and kind of the language design really privileges records because they're easier to type check in there faster and they they have some nice properties and the object system is fully typed and so that is what what you're producing when you use the the quotes to Knox it isn't object makes a lot of sense that's really interesting so the reason that I was having

  
 switch back and forth between these and kind of experience the differences between the driving abstract but driving abstract does is you make a record type an actual camel record type which is commonly typed you add the directive to it bucklescript BS. Driving abstract and what that will do is that will then represent that record as a JavaScript object as its implementation underneath so if you are worried about wrapping your JavaScript code cuz you're doing a lot of interop instead of using jsit you could say oh this type is coming in forms to this record that uses driving abstract it also generates a bunch of accessors and Setters for those fields and here's where it gets it starts to get a little bit interesting is like those exorcism accessors excuse me on Saturday that it generates are named as the fields are named and they that's module wide

  
 so if you have a record that's like person and the person I'm sorry I record that's

  
 this is hard to pull out of time I had to like what city of a record this person and a record that's dog right and you define them all in the same module space and you say that they both driving abstract and you give them about the attributes of name like a person can have a name and a dog can have a name those those Setters and Getters that are generators will only apply to which ever type was listed later in the file the class right because you can have you can override a function later and and that function gets generated although that that issue which would also apply if you just use records because record attribute names are similarly scoped oh really I didn't know that but you can access a record attribute on itself right so you could if you didn't use driving abstract to get a person in a dog with names Define in the same file and you could say like it you know if you had person hey does a person need that name and it would know to look on the person only

  
 beforehand that that was a person typing out a dog type right so it gets a little complicated with the the weather in France works and so generally the way I do it is just not have not reuse battery names if I'm in the same module and it if I have multiple types multiple record us a module all off and make a sub module for each one so that all the acronyms or scoped henze have person. T.. So that was cool but this is going to start transitioning into the main topic of this episode is graphql but the reason this became interesting was because we're taking on a big new project at work right now and I'm riding in a server that uses graph to Iraq you a labia in the front end and then uses a service called prism on the back end which is super cool we'll talk about that as I can do but I was using a project that would take my graphql definition and I was in general

  
 type definitions in reason that code so that I could said I could use the objects that were coming in without having to do a lot of Jason decoding and cutting cuz I said okay well the the graphql layer automatically verifies that the object is the correct structure for me so it's safe to just assume that as long as I've generated my types from the graphql definition I'm safe I don't have to worry about then cutting a d cutting so I was originally doing it as JavaScript Jazz. T objects doing the structural typing and that was working out fine there was something complexities in that like my graphql type had

  
 dependencies in between the types so maybe like for example like a journal entry like in an issue depend on a journal bed and maybe a journal that have a list of entries so you have mutually recursive types of the space where if you'd find any type you have to do it like an and if the join your types of an and and you have to mark it as a recursive as well so there is some interesting stuff there but it worked well enough and then the new bucklescript came out and they said hey Jess. T's deprecated use driving abstract do I change the template code I regenerated all the types and it got nasty generate modules for every one of the types in the graphical definition and recursive modules are a little more exciting. You also have to generate them

  
 Jewel Heights module signature started to get Harry for sure and the code like the access door code is getting complex as well because yet he's like they had a person object instead of saying person hatch hatch name which is kind of nice and concise I was doing open the person module passing the person value fastpipe it to the name from running a little hairy too so we actually ended up moving back to Jazz. T which it may become an deprecated I'm not sure at this point but the future holds but still definitely a use case that will be supported

  
 there's the obvious driving abstract is an interesting new exploration I don't think it's been I don't think all the kings have been worked out as much was like oh how do we how do we deal with having a bunch of different things that we're generating I kind of think it's it's really nice to have it generate an object in the back end but yeah I used yesterday for some things as well so that's where it comes into like which one should I use the question kinda depends on what you're trying to do in this case for me and in my code where I was taking values from my front end graphql layer and moving them to the next graphql later and mostly I had to like take these values in just transform him a little bit

  
 I want to spend some time to get it to a better place cuz right now it feels like mostly what I'm doing is dropping down into jazz. Raw and I'm sorry because what I'm doing is dynamic stuff like this I don't feel very type safe cuz it's not taking in values and I'm saying like well in the value comes in if it has this attribute on it go ahead and delete that attribute and replace it with this other thing like I'm really transforming the value and sending it on forwarding the request on to the back end which is by nature Dynamic so I have some some thoughts to work out here at but maybe we should clear the clear this up pause for a second and then introduce graphql really quickly and haven't heard about graphql at all but money does a quick introduction sure so graphql is

  
 it is a it's a way to define a schema for your server and then on the client you query for specific field objects such that you don't have to define a new rest endpoint for a bunch of different things if you're familiar with soap back in the day or Swagger that there has been a bunch of different ways to like have a standard format to to Define your API and this is the latest one Facebook has been using using graphql for several years and they recently open-sourced it and lots of people been getting excited about it and there are a lot of really nice tools that you get home and

  
 there's there's a great tool that you get for free when you're using graphql that allows you to just explore what different queries will look like and that is fantastic if you're coming from you know what traditional rest background where it's like a shot in the dark I wonder what this does I speed up development insanely comprehension as well as amazing and to be clear have it by like the nuts and bolts of how this works so it doesn't sound magic basically it's still working over HTTP that you can use other transport layers so like if you wanted to on your server you could Implement graphql on top of pro debuffs basically it's just a pattern in a set of library is a standard right but the general implementation is I generate in a string body which has the graphql query language in the string inside of it was kind of like J's on the issue but it's definitely not Jason and I send it in a post request with and my client knows or answering my server knows that is expecting

  
 and then the server takes that if Parts is it it also validates it which is great so if you send in an inappropriate request but first of all your client might stop you from that cuz that's really is cool so you might actually get help from not sending bad request initially anyway because your choice out to you but once you send it in the server will actually do validation for free and say no I'm sorry that's not an accurate attributes you're asking for and so once you're ready graphql server you know that the date of this coming into you and meet the expectations that you said by typing you see my which is super cool and plus it keeps you want us to because if you try to return a value that's invalid that doesn't fit into the schema or if you don't return what's expected then the server also will throwing error error response in you know you should should not do that but at least you'll see it in your box that that India runtime thing but that's way cool

  
 is the shape of the data that you want and a Khan Academy we've been using graph drop it let's talk about graphql on the client because this is some really excites me there is a a community project called reason Apollo and if you've done anything with graph to out you've probably heard of Apollo they are one of the biggest names in graphy all right now and they have a a really cool front of library for managing your actual and doing all of the the fancy stuff that we talked about like key duplicating of queries and smart cashing and all the stuff that kind of goes beyond just the coregrafie authentication but they have this nice client library that has good bindings to react and someone in the reason Community was like we've got reason we act I want Apollo to to work with this and so they have it set up and it's

  
 so nice I I talk about this in my pocket we reason, but you write your query in your in your reason reason react app and it will at compile time make sure that you're curious ballad so cool and and it will give you ID autocomplete when you're dealing with the day to come down it just blows my mind in mind Langley cool yeah so that that is the dream of working with you know we already have a typed definition for the state I just bring it all the way to the client so that I won't ever ship a client that will get those validation errors when I went to send them to query

  
 and it makes it feel like you're not really necessarily having client server anymore either it's like you're just using data right in your ID I think that was maybe the dream of xml-rpc year or you know like we're critical objects back in the day so maybe we got to be careful with that because you're not mind full of at the cost of remote data but there's some incredible stuff going on there so tell us a little bit about you probably understand more than I do a PPX works and maybe just give everyone an idea what PPX is are in general is stands for maybe preprocessor extension but basically it's a it's a code transform if you use JavaScript in battle it's about a plug-in that will take the the syntax tree so after your cousin parsed it is in a tree of

  
 statements and expressions in all these things to the big data structure right there it can you know Runtastic do these kinds of things in this case the graphql PPX is taking the the query that you wrote as a graph to a query parsing an invalidating against your service Kemah TX Lee write a strain you are a multi-line string and you give it a graph to I'll tag as as a few extra active and that's right which is super cool and this is the same string that you would write if you were using Apollo and react it's the same query that you would write if you were using the graphical you know I D E like interface to graft you also you just drop it in and then it will create a type signature for it so that you get all the autocomplete and stuff like that and then do the validation on it

  
 that's just it it's not even this is what I didn't understand really before I started using it it wasn't it's not just out of complete like I thought so it'll be autocomplete on the field as I'm building the query I didn't get that I don't think it does do that what it does do is it actually dynamically dynamically it at compile time gives you a structural type of the response of the data based on the field your query so if I say I'm going to go ahead and quiri the all my journals and I'm going to just get the name and the color of each Journal it's going to return you and array well based on the type right of The Aviator green but basically it would say like what I'm giving you back as an array of JS objects that have the attribute name and color on and I got to look at it and make sure it's valid it's it's super cool and again the reason pipe system

  
 helps you even more because what you get back is a some type that could be a response it could be loading or it could be failed and you have to do a switch to two handle each of the cases so you can't write code that doesn't handle the failure case

  
 very cool so it such helpful tools is awesome so so well and reasonable on the phone and I think it's a super promising I'm at your own one more thing and I forgot to make perfectly clear it just as if you're starting to dive into graphql but this the Brain Change about your not fetching complete objects anymore I already said this where I was saying it like it's not fetching a list of journey cuz I was trying to do this typing in my mind where I was like okay I'm going to authorize a person I have to accept their Journal first and then get this attribute off the journal and maybe this other fetch the ones I did started to use the graph ql PPX and build the query was like actually all I need is the ID from the journal and in fact what I need is like the ID from the user who owns the turn off and so I'll just write this one query and I won't fetch though it's a journals I'm just going to get the like I'm going to select the field ID that I need and I get back this tiny piece of data that specifically for the ones

  
 I need and it's and it's fast and non komplex and I don't have to like get types back and press them into the objects and then get the actress on them and I love it I think it's amazing I miss this gets back to the name graphql graph query language and it's saying your your data isn't just a bunch of tables disables have references to each other and so there there's a graph of data and you can reverse that graph very easily to the drill in and just get the data you need to look to the Future everybody is coming

  
 okay I think we've covered graft you out pretty well if you have questions or comments about the stuff we said today we want to hear him I'll does a smooth transition to the next part but we were trying to figure out a good place to have Community interaction and we're glad to receive tweets or emails to direct contact but maybe a great place to put questions or comments would be unreasonable. Chat which is a discourse instance for reason go ahead and you can sign in with your get have profile which is now your Microsoft profile I'm actually go ahead and chat and create a new topic and we've asked for the tag to be created reason town we don't know if it will be I'm assuming they're going to be nice to us and created you look for that tag and go ahead and leave us feedback or or ask questions or solve

  
 problems that be great to Vdara don't have any problems but I do and we got a little pic to pick as well we I love to watch the look what I built channel on Discord must people posting in there about fun things they make and talk about today is something that was actually built during the recent contacts on Google and it is a PPX so it is a compiler plug that will extract your International sizable strings and so you are going through your front end with a reason react app and you've got various user-facing Springs do you want to be able to Translate and there are battle plugins to do this for JavaScript and now there's one for reason that will extract it out put a nice Json file you can upload to your translation service

  
 and then it will integrated as well so another words it'll give you some kind of thing where you change the file put it back into its the language and they will swap out the strings for you that's the sound of my mind being blown right there that's incredibly cool so pick picking that will put the link in their link for the PPX react and pull extract extract so whatever you're all done in one day it started it I think before and then jamming with some other people got to the Finish Line that's way cool it looks like you have to be pretty comfortable with okay I'm all Native sex is all Native you don't just like dropping a reason file and write a PPX like you would with Babylon JavaScript Ray it's not nearly that streamlined part of the reason for that is

  
 they're very powerful and very complicated and it's it's not a very there's not yet and so for for most things like if if you've used a language with macros it can get kind of Harry and really like hard for Outsiders to come in and understand what's going on because they're doing so many Transformations on The Source before it actually gets run so that the general idea is tread lightly but I've I've been dreaming up some some tools to make it easier to write them getting it's a good idea I didn't get to remain hard to write them cuz if it's hard to write them then to your people right dumb stuff but maybe I'll see if you're too Alright good stuff I don't know so it's it's a hard line to walk how how often in your personal opinion should PPX is be reached or versus just trying to keep the core

  
 much more often try and do it normally right just just try and write the code if there's a little boilerplate just write it you know it's like City it's

  
 there are there definitely cases where this would be ridiculous to do by hand like for example extracting all the translatable strings that's not something that it really relieve the burden to have something that goes through this out automatically and if a PPX it's on well then it it won't be too much magic skate but again it's a hard line to touch red I think as a community we have a

  
 a down-to-earth philosophy enough that they probably won't get out of hand but we'll see we'll see if that changes a community skills to one of their PPX that I don't I don't have a link for it but I have heard through the grapevine of which sounds incredibly cool to is one that lets you write CSS for inline attributes as a string and it actually typed XU CSS for you as well make sure that you're writing valid valid values and also valid names for your CSS attributes which is pretty sweet and then I think it'll actually turn those into saddle strings to put on your react so I haven't used it personally but Heard it Through the Grapevine sounds super cool example of what you do the bed the power of the I think that that could be a Big Y in Ware PPX is actually doing extra types type it in for you and not just saving you a few lines of code

  
 well I think we did that all of it thanks everybody until next time

  
 just kidding we're back welcome to the after show because there was a big chunk of the show where we went way off into the weeds probably more than what most people want to hear so we cut that chunk out we moved it to the end that's what you're going to hear now so there was the original show and now this is the details so if you're really interested in graph to all types of systems and how a grackle middleware server could be written in reason then keep listening we we don't come up with any conclusions but there's some really interesting questions and it won't be a good ending either the audio will just cut off cuz that was where we ended it so does was until the end and enjoy and let us know thanks bye

  
 so let's uh so that that prevents what's call over fetching right where you're not getting more data than you actually need in wasting sending that over the wire Etc so I was going to working with graphql on implementing a server that used postgres in the back end and once I started to get into object joins which are part of graphql to which is super cool so like I'm used to saying like Okay well I'll return you a list of journals on each of them will have a user ID on them or maybe like I'll return you so in order to like get a user's journals you expect you there first and then say Oh no I got these ready I'll go and ask for a list of journals like that brunch rational rest way of doing it but wait is graphql is he to say oh well on external object a lot of reference back to the user that that owns it and and the user I'll just have a list of journals that belong to it and said the query itself when it comes in then the servers response

  
 for looking and saying oh okay so I'm catching these are and the person wants their journals so I'll go and make all their correct patches for the database but that day together and ship it back which is super cool and it starts to get a little bit complex once you're implementing it on the back end that's true but it can cut down on the number of requests that you have to make and also if you don't need the the user's journals then the back end doesn't have to make that extra database call so we can produce a reasonably minimum Aquarius well it is way cool but here's where once I started to get a little little bit hairy I was looking around at the internet's and there's a company that is really pushing and supporting graphql call Prisma they've written a pretty awesome server that stands in front of common databases their goal is every database ever right now they do my sequel to post-grad

  
 but their deal is it's basically like exposing your database as a graph to all API and its entirety and is open source the technology as you can run it you can just get it and run it for free with no cost or you can use their Cloud offering and stuff but we started experimenting with it and our minds were immediately blown so it's so cool you basically just take your types do you structure your types how you want to store them in access them in the database and you give them a graft you off I'll adjust your types no no special queries or anything you say you're my type latest up I am working a lot with your nose and it's because I work at day 1 so let's say I like your journal entries and attachments and stuff and then I publish an API and it goes and it automatically takes care of database migration it creates all of the tables all of the Rose and all of the indices for optimized clearing and generates all of the code on the back in for actually

  
 storing and fetching all of those resources including pagination sorting like all of the stuff you would expect from complex complex clearing others my pockets me anytime you feel like you're in your grandfather's house and so I was I was thought that was cool until I started to really dig into it and realize how really comprehensive the API that they generate it's because I can say at any point I can say like okay well I'm making a user and I want to create a journal as well will they have fields for that because you said that create user mutation got a special type specifically for creating user with the required fields and you can add in like oh and also make a journal at the same time and attach it to the user create a journal and also attach it to an existing user because they have Fields degenerative types & Fields for all of his different circumstances where you would want to associate ever laid data together

  
 this got like this is graphql such as was mind-blowing Lee simplifying for us on the authorization end or is that the right I always kick is an authorization and authentication yes authorization so like let's say and they won we've got a circumstance where in the future we would love for people to be able to share journals and so and maybe your when you share a journal of someone you can give them read-only access or right only access or like partial access so what we've done in the data structure is say alright so they're the journals that belong to you then there are the journals that you that have been shared with you and inside those journals you may have authored posts that that the original owner of the general has it so this is kind of complex relationship though cuz they're so when we're doing the authorization for modifying an entry it doesn't become just a normal like oh does this person on this journal entry

  
 but it becomes the graph we were able to do this on one graph to upgrade which is amazing I say something's coming in and I say okay well that's the answer they're trying to modify and include the journal that it belongs to and the person who owns that journal and include the people with whom that journalize shared and include the owner or the the creator of that entry and the share permissions like I just said that graph which is sort across many different tables and would have taken me multiple requests and gluing and cutting to try to put together myself so I said just give me and I asked it also only give me the fields that I care about what you're like the specific permission the ID IDs and the ideas of these things they came back all in one query I had the fields immediately cuz that's what I needed and authorization was done and I was like I am sold this is so cool so so we started building on that and this is where reason started to become a little

  
 but the strictness of reason it started being a little more complex for me because I now have a graphical Curry on the front end where people are sending graphql. Invitations to my server which I'll be running in Lambda or wherever doesn't matter and I'll be taking those queries authorizing authenticating the person authorizing the request and doing a little bit of extra stuff so the prism API on the backend is just raw database stuff I'm not going to expose that to the general world because I want to do things like say you are only like when you try to create a journal or an entry I'm automatically assigning it to you so that you can't like sneak in and create a journal and assign someone else's ID to it and sure you know get sneaky information in there right so it won't do any of like validation beyond what the gradual schema can give you the correct they may be working on something but at this point that day

  
 counseling guidance is like this is your database then write your application in front of it and and use the database so at this point then I said okay well I'm getting a query in to like make a journal now I need to add the current authenticated user as the author of that journal and then forward the Clarion to the database with the little bit of modification and my mind had to change the way you thought about things because I was doing the pipes for all the stuff and I was like okay well if you let see the person is asking for a list of journals I was like well the return type from accessing the database is going to be a list of journals that's not true anymore is graphql it's going to be a list of fields that's right it's going to be a list of whatever the user requested from the front end API right I was like oh I have to forward the requested field along the back end yeah said that to this becomes really Dynamic for me interesting cuz you're doing

  
 it's essentially Rock Hill Middle where he comes in and you have to do some validation a little to manipulation but you can't know beforehand what the exact shape is cuz that's why we like crap to out cuz that you can request any shape that you want that fits the the type exactly right so I feel like there is an answer here like I could

  
 it's the fields are defined ahead of time so they can't just throw whatever they want in their unspecified could be an option you know an optional kind of think so there are ways to type and represent that value as it's coming through and mutated as well aren't there aren't like super easy ways I know that there are there a code generators so Prisma will also generate this is pretty neat to the also generate Library code findings to Prisma so that you don't just have to send normal requests or graphy La request to them you can actually basically generate an API for your language but they've only Implement to JavaScript typescript and I forward it to try to start to do reason and then I was like wow I'm saving the Yaks or typed interfaces to their database API which is cool so at that point then that's part of the question there is like if I were to Forked an implement the prison of binding for reason would I use yes I T would I use records

  
 but I generate and Cutters and decoders what are use abstract you know that's that's kind of a question there so that's why right now I'm opting for vs. Raw and just doing it Dynamic she gets it done but it's not ideal it does it does feel like a case where Ro polymorphism where structural types are what you want where you you will add to the query the user even if they didn't want it because you need to validate it done so you know that when you get back have at least a user but that sounds like a stretching experience yeah it has it's been an interesting growth experience for me so I'm curious about that because with the rope polymorphism and the object types in a camel maybe I I can dig into like real world oh camel and read some more about objects but the apis for four Js.

  
 the the library functions that are included with Buckle script are empty like empty JS object and a sign and I think I might have been one other I don't remember what it was but there's no way to remove a field from an object right and so I'm wondering like is that something I could add like right now the the object got to sign code says like take any shape of an object and any other shape of an object and then motion together now I want to take any type of an object and like I basically want to know if we're talking about bullying mad like I want not the not the union of them I want the difference basically because you added something to the query that you don't want to send back to the client that's what gets complex yet so like on my

  
 I've made my API a little bit more simple quite a bit more simple than the prison API where I say like OK create an entry and just add the journal ID on to it and that is in the field Journal ID and that is something a person that doesn't understand because they're Aquarius structured where you actually attach a journal and he say like journal and then there's a field that says like attached and then you give it the ID so that's super simple for me to transform so when my query comes in I say okay well if there's a journal ID field on the query on the mutation go ahead and take that I D Pop It Off remove the field and then I'll Transform it into the the Prisma way of doing it that's quite complex so you so you want to swap out this object and not return that and instead give a different attribute I was something you got from there yeah well because if I if I try to send an object to the present back in with the attribute Journal ID

  
 I'll get a diaper or undefined sitting at the undefined with with object. A sign doesn't actually change anything sending it to No No's and an undefined article also since their actual Noble types of graph key well it says they're still not a field you know that I can set this called Journal ID even though yeah I think you'll you'll have to create an external function that that does that little bit that is remove this field is there a way to represent that in that type system like is there a structural type function that does subtraction of fields rather than just the merging of fields that's what I want to find out yeah I don't think the

  
 there's that kind of algebra types unfortunately gone way down the weekend sorry for the last hearing get that you can jump around it with type with generation cogeneration wear based on you know you just add an attribute or something sent some meditative to your code that is you know I want you to generate this type with subtracting something else out

  
 I'm thinking what the actual answer is going to be that's going to feel good is I'll generate code on both sides where I generate the type of their query coming in with with nullable types sorry I just hit the microphone and I'll email you sent you generate the tide coming in with Noble fields and then you also generate types for the Prisma API and then you just treat every field and say okay well then for every feel like the only problem you end up if there is then you add another field to your API and you forget to add it in the types of seems like you forget to forward it along. Just doesn't tell you so that's where you have to catch up a test or something you could do that but there's nothing that would require you to forward the field between the types that makes sense if you have a type for the graphql API on the front end that you have and then a type for the for the prison API there's no check that saying make sure all the fields are forwarded from the front end if you

  
 I to the back end it's right so that's where you like oh well so my choice here between like do I do the dynamic thing and get runtime errors where I'm just like sitting up some of that you know I added a field that I didn't mean to and now that camp before it it and I get a runtime error or do I do the other thing where I forget to forward the field and then there's a bug that we don't get any laws about but users have to say like hey I saved this and now my activity locations and getting set on my entry or whatever and it's like you don't cuz I forgot to forward the field you know

  
 to test a gasket cover that

  
 yeah I think

  
 what what I would want is a way to describe the transformation you're doing such that you can say everything other than this field that I'm transforming should be copied over yeah I wonder how you could do that

  
 but this this does get quite a bit beyond what graphql supports at the at the type of lizard very interesting point you have to be responsible as a programmer and like the type system can't help you anymore which is sad and this is a great example of where you had to get work done and you you were like I need to be able to move on from this I will drop in some JavaScript and I really appreciate being able to do that working with reason where it's like this I could I could pour another 5 hours into this and maybe not have a solution or I could fix it now ask on Discord and come back to it yeah I understand the risks of what are going on here and it's acceptable for me at the moment we can come back and fix it later

  
 so I'm happy with it right now but I do want it to be better get back to that so there's a PPX for graphql